<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Monitoring Dapur MBG</title>

    <!-- Bootstrap CSS -->
    <link 
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" 
      rel="stylesheet">

    <!-- Bootstrap Icons -->
     <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/grafik.css">
  </head>

  <body>

  <nav class="navbar navbar-expand-lg mbg-navbar sticky-top">
  <div class="container">
    <a class="navbar-brand text-white fw-semibold " href="#"><span><i class="bi bi-fork-knife"></i></span>
      Monitoring Suhu MBG
    </a>

    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarMBG">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarMBG">
      <ul class="navbar-nav ms-auto">
       
      </ul>
    </div>
  </div>
</nav>


    <!-- Background Wrapper -->
    <div class="bg-wrapper">
      <div class="overlay"></div>

      <div class="container position-relative py-5">
        <h1 class="text-center text-white mb-4 judul">
          <span><i class="bi bi-graph-up"> </i></span>Statistik Suhu Ruangan<span> <i class="bi bi-graph-up"></i></span>
        </h1>
        
        
        
        <div class="row justify-content-center">
          <div class="col-lg-10">
            <h1 class="text-white mb-4 tanggal">
           <span><a style="color: white !important;" href="/">Halaman_Utama</a> / </span><a style="color: white !important;" href="/tanggal/<%-data.tanggal%>">Monitoring_suhu ruangan</a></i></span> / </span><a href="/tanggal/<%-data.tanggal%>/ruangan/<%= data.ruangan %>">Statistik_Suhu_Ruangan</a></i></span>
        </h1>
    <div class="dashboard-card p-4">

      <div class="row g-4">
        <!-- KIRI: GRAFIK -->
        <div class="col-md-8">
          <h5 class="mb-3 text-primary fw-semibold">
            <i class="bi bi-graph-up"></i> Grafik Suhu Terjadwal 30 Menit
          </h5>
          <canvas id="suhuChart" class="mt-5" height="120"></canvas>
          <!-- TABEL DETAIL SUHU -->
<div class="table-responsive mt-4">
  <table class="table table-bordered table-sm text-center align-middle suhu-table">
    <tbody>
      <tr class="table-primary">
        <th>Jam</th>
        <% data.labels.forEach(label => { %>
          <td><%= label %></td>
        <% }); %>
      </tr>
      <tr>
        <th>Suhu (°C)</th>
        <% data.data.forEach(suhu => { %>
          <td><%= suhu %> °C</td>
        <% }); %>
      </tr>
    </tbody>
  </table>
</div>

        </div>

        <!-- KANAN: INFO -->
        <div class="col-md-4">
          <h5 class="mb-3 text-primary fw-semibold">
            <i class="bi bi-info-circle"></i> Informasi Ruangan
          </h5>

          <ul class="list-group list-group-flush info-list">
            <li class="list-group-item">
              <strong>Ruangan:</strong><br> <%= data.ruangan %>
            </li>
            <li class="list-group-item">
              <strong>Tanggal:</strong><br> <%= data.tanggal %>
            </li>
            <li class="list-group-item">
              <strong>Suhu Minimum:</strong><br> <%= data.min %> °C
            </li>
            <li class="list-group-item">
              <strong>Suhu Maksimum:</strong><br> <%= data.max %> °C
            </li>
            <li class="list-group-item">
              <strong>Rata-rata:</strong><br> <%= data.avg %> °C
            </li>
          </ul>
        </div>
      </div>

    </div>
  </div>
</div>

  



      
      </div>
    </div>

    <!-- Bootstrap JS -->
    <script 
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js">
    </script>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>


    <script>
  window.GRAFIK = <%- JSON.stringify(data) %>; </script>


    <script>
const ctx = document.getElementById('suhuChart');

new Chart(ctx, {
  type: 'line',
  data: { 
    labels: window.GRAFIK.labels,
    datasets: [{
      label: 'Suhu (°C)',
      data: window.GRAFIK.data,
      borderColor: '#0D47A1',
      backgroundColor: 'rgba(13,71,161,0.15)',
      tension: 0.4,
      fill: true,
      pointRadius: 4,
      pointBackgroundColor: '#0D47A1'
    }]
  },
  options: {
    responsive: true,
    plugins: {
      legend: {
        display: false
      }
    },
    scales: {
      y: {
        beginAtZero: false,
        ticks: {
          callback: value => value + ' °C'
        }
      }
    }
  }
});
</script>

  </body>
</html>
